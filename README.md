# lambda-mtls-key
lambda-mtls-key


## Endpoints

+ POST /createCRL

      {
        "httpMethod":"POST",
        "resource":"/createCRL",
          "body": "{\"cert_x509_pem\":\"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZjekNDQTF1Z0F3SUJBZ0lVQWJSYTFKZGoxRGJuRUt0V1RDaUJFd0h3MTFvd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF3d1haMjh0WVdOamIzVnVkQzVrYjIxaGFXNHViRzlqWVd3d0hoY05NalF3TmpBegpNVGt5TlRNMVdoY05NelF3TmpBeE1Ua3lOVE0xV2pCRk1Rc3dDUVlEVlFRR0V3SkNVakVMTUFrR0ExVUVDQXdDClFsSXhDekFKQmdOVkJBY01BbE5RTVEwd0N3WURWUVFLREFSRVQwTkxNUTB3Q3dZRFZRUUxEQVJCVWtOSU1JSUMKSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQWc4QU1JSUNDZ0tDQWdFQXB0cXhjQ0RZbEp1NU1HM3g3b0ZvOERMaAo1SmFQbFFPeklEZ3grSFM0SUJFcU1GYXBwUjZjNWFpSUpsazVWampVUmVMWjNkNzZudklvc3FxZGpDQklvMG1FCkR4TEY4QVBENGsrMTFUcXYvRXFwd0svNHIvcGVRelVlbXkyaVB0MmVhUnRJYU9BVVRzaEl5cEo2TU5YcDY5V1QKTnV1RVVtWURpRTZiRWlyVnFoVmM1U3dJVFoxOG1GWXlPc0c2TkR3czM1S1pheUR0enJ4dy8yNGc1eXJ3L3FDTApxVEFzeENpd0g0TEIvZFZMWlE4bTV6YnZEdUNwV2RaQkRtelZzelRPWjBaTnAyeVFJb3JyQWFxZ0wvbWhEU1JCCmYwNzQ2NjlEQlgrSmc5M3NIN05ldDE5YkMvRzdPcnc1RExEREpDajltcXJNRDVrRHlMTWRZVnRINFJoWkdVSVoKclpaQmw1LzFLKzQyV3FtUjJhQmd6RVBVU0ZLaHlOTXBuSHFiTU5GSjJiTW5ldGVJYjN0Uk5Nem05eW1acWZCcQpkSVphUG00ZXNCWlg3Q1puWWk4V0plVHlSWkU5bnE4dW5tS0N2TG9FeFFGMlhxVG41bERhT1VhcVVyMHpEY1ZSCnZDZU1wTFAra3NjVElGazVScEFhaStOdW94c2lyNFdTU0xidjFlNk4yWjM4K0paeURuMG1DMnJCZGhkT0ErOGkKYmRFNlFvTGZvTnV6STNiQjFJd1Fzak1BNXRUdG0xSG8zN2ZBa0EzVm1JNjRHaHN1bno0V2tSdzNYV0dIcEZyRwp3QXZZUVlRa2NiUXdsQ1lGelptTjVOZFhpc05NcUZ0MjArTjNxWDIzZ3EzSjNJdys0Mno2YWlZRDJuajUvcWlECkt6OHN4Ylpnd1dySDFqRW80ZGNDQXdFQUFhTitNSHd3RGdZRFZSMFBBUUgvQkFRREFnV2dNQ0FHQTFVZEpRRUIKL3dRV01CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakJJQmdOVkhSRUVRVEEvZ2dsc2IyTmhiR2h2YzNTQwpMR2R2TFdGd2FTMW5iRzlpWVd3dGJYUnNjeTVoY21Ob2FYUmxZM1IxY21VdVkyRnlZV1JvY21GekxtbHZod1IvCkFBQUJNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUNBUUEwUlg1UTcwMDAzdnF0enpSek5JN1hIMGZoVkdVZWo3YkIKTlNvMnFiM1B3N21pcHF3cy9VcmdsYzkycEdGUGRwd0lkLzNKMVVhMW9YVkFJci9QSDJCK2w5clhxL1hHRk1HbAp4RG9FTzJxTm1VUUlBWDBBV0hvWXVka2lWUURtY3lRc1A5QXlZdnQyYWNNc0sxZ2NTaWd2S3VCY0RCVVR6bDRNClRrNFZjeWRMTmZsRTRjQzZTRGVEVXB1aFZrb0JzSGlhYlgva0MwYTJUeFpkOEQ3aXhSZjcxa2RFd1NtU2VUU0kKaWNqYXMyVmt4NlhDVkluOTU4MitDYTI5Mm9OZ2s1Z1hKRDhDamdYcHIvWkFaenorUG92aEx1YVNUUngwb2VEKwpvNUJDUllxNXBnZkZ1eDAySWJsczZRYUljeEFGNEJGUHdUMXpST2RwSWJDWjdTdUlZRmhyenVNNmZyTWJKOG1kCmZVRVl3OUFkcmJxVDdGRHBsaUVNcHJ3Rkk5eE01OTdVNk1rZTBSVXNaUVd5RkVydGJ1c2FwK2FhZUMwYm1sUlkKTzhvLy8zWFdTTWlZcXJHbVp0bzQ0WGQ0WkZhSFJCVnFPRHVlZVVOQlp0L0trUmFQb3ZrTjRDMHNodGVjeXl1SApYb3JGOUVkcFFQQWR2OU5nak81NWxvVkxPbWpTZTZSRXo2V2laSFFDRndYS3NVQ3Rxdm1qdjd2b2l5NytNcG5zCjg1L21BcjZQZ2NRT3VjQ0syUVlwa3NRSHJnbWU2b1ZPVENyUDVaMTF6d05JMTNXSTdlS3JwVzE0TC9hM3VRUTAKek5taHJwbUhKWTc3U0hZaHVtZ2xCZkNXRWNoVzVFZ2h4MXByelMrYTdUYzFzTWxKUm1Cc2hKcTdDeWxVdDZwNwpnaWFpbGJRNFFnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=\", \"rsa_private_key_pem\":\"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS0FJQkFBS0NBZ0VBengxejc5bktCUVBLWm5aMzVhRlJQdzNycllFdmJIUGVxQjBuT2hQa2dCTjZsVGRNCjlqYU5teU1IclpZM3U2L2JwYVZzQjZ4ditrMHFMbGJpZ3o3bHFZOWF2MFh0TDJJR1VBRlQ0REo2ODJmSHUvTTAKMUdvV3VOUlBaUjcxL0ppY2ZQb2JuK01XU3NNaGVFQmRVazYrcUlnTXlyUDIrQVBoLy9yaWNQQVgwVVFPbk5obQphTkRhd1plZmxJZnI2RzhlaG5XQ1o3Wjc5dlNGekpRQm1CY1JqaXo5VTRPWVQvWjVKSnk3VWlYRVJRdTlsQlJoClh1b1hZdnh3SERSaVY0dVd4Y0U1RXlrQkVLM25UbU1RVHhtazZLM1NMaGdGL1FTVExnR01uUDlxQy9Xd3BDOWkKcEVBSW1vajBKV1BzRE52ZGYxSnUvZzRCZk0rdDExbzNuT294UjhVV1Mrc2s5bEZ5SVFtZXEyZzBUOGVNUktoMgpYcEticzBJYWhwZXNzNCt3cEh5aGhBMzNzdjUza0NJY1dKbTB2VzBIWFE5OGZ1NjFlWStuQXdzMFBodzJ5ek9RCk53S2NsU0trSzZ6Ukg2QlNPQW4wQ1J2VkUyQWFhR3JlWU1uUEQ5K01NSGpBTmExelA0RUpveHAvaWl6ejFTdHQKcFcvVkwyc2lYRjdHcXd4aUVHYXFVWmFrWXFmUjF5Wlkrd3FETGt5TmlZanUzS0dMald2aXRWQ0JxK1J6VjJKZApXbTBXUTBxVE8wUEhSTGJXV3JsTWI2RXpiSjZSWlVCaGwwU2lwKzFkQTRYVkt4OXQrcDU1dnF0VnE0anNNSytZCk9od0svVFFrNWl2WTZmZ01HVWRBNHdTWERXa2FzbDVwZlRRRW1KYWs1UkZGOFlNZTMyS0RuVFBTcEpzQ0F3RUEKQVFLQ0FnQTRmOXBldGRUTVpXcFRaVUh6M0h2amJaSzdOQ0NSdjFJZ0hrUFRMaFlKY2tiZ2FjT083dmJXT1VvZwo2bmV0dFoxL3BJN0IwU0tDNzRYd09qZDBnalg0ZVdqU0FPdGhINmFGTUxlRzAzNkM0KzZ5c1BmYWNrNWNnVjVmClFZRHROVnlMSTFkaDJIcitUaGpWU3dtcUtGME9jSDY4MVRjc0ZUTVR0NGNLTkJUck8xdVpJZGRlQkl1SWdDcEMKUklud1VFL05ja1R1c2ZORFBSVTY1NjAvcGh0ZDQ1di9xa2hrbCtJWVFNRkErWmgvRldMVUFITkhoeWgyRWxNcQovb2ROUm9FTTFWY1NpUDhIWThsVHN1YUNEWWJWQ29YcG1SZ1pHNlJpeW4xblhxMjVNWDdNYXpqSGdjaFhEOEU2CmFmVzgxRVdxTS95ZlJZYldXM2thNUR1RGpNZUFSR3NDV2tRTFVpUXoxcjZMK3hYR09QWmJDbnErV1J5R0RLWWYKbGNOUmxSNTB4VnN1NGFJMTdHWURXYjgxTlF1aFk5ckw2MXcrTjZ2MGlJckJobjh4YzhMNFc1NFA3bXo0elhqRwpORko0MUorYlMydWl1SkxGYmN4SmpPRmpqeENCSlhzNFpJMmF5T3c3SnZVVElUN3l5eHZNbWlPYjBsUTUvaWVYCmV4L09MLzNYYVZ5bnF0YU02R0NKQ003cW00S0pDeEpTSUNOZjk1cTlzbTJpanBQV29EMWoxcUw2eGtJSFhKc3AKdHBPbGdibjdTN2puaFAvY1BhUkhIeW0xR0liMTlFTFV2MXJQNU9aTUtCNHgxclB0L0ZmUFJTTXN6RmE4dkJtMQpJNHpxdXVUSVFBeUpIS205OVdDOWlWOVVRUm1rcE5POHdSdzNQd2VoZTd5OWRkTjg4UUtDQVFFQS9UTS95UkVPCnFxcCtaeVNwemZCRUs0TkFGbWU4ZTIrWlpxSGJIYWRFWE5BWjRYb1Axa2ZxRzRvZ04rdm1RUzJSb3pBQnZ5bnYKUndNMVdyQ21zcGpLVUdRRnhiSEVQWEFDS3RSeVQvZUtDTVNaNkdQdmtnRWEzWXhsV2xyM1d4K0tCYlpCcnFyagpsL0NLL3B5SU5nazZqRWVCZmhUWXNHL1BaOEVxQnFYNStjMUJKTTRuOHB6N0ZCNWM4ckhBTlBuYUZNRVZGaHJQCmE2cS85OGpjYzA5SXNSQVZpMnYwODVMVXd1eFFna3ZQNkZ4WEp2TXJLZjV6UlRudzh1azlaQnd2RHhvUTRnenAKS1gvbjFCUmMrU1Rsbk5Wd3lGRCtzVklXNHBBOU5HRFhMb0JxTVBVb1dtMmtnNkFvbXhqQ3VWMVh4UVFoY2g3YQpVM3EwdlJ4V3I4MzVuUUtDQVFFQTBXZS9WYnhyaDROckpmTmR0WjUrN1NqekpYWitTMTRzVjAxT3hua2t1M1FzCnUwbUh5MnJVVlVnNWwwWE1IOEVoRmNKbGdjQVV2Vmc1VVM1MmNsQjZNcEtJZ2E1STVNYzBaYXpLS0djdmV0bmkKSWdsVElLVlkzdHhnV2lpQnZYRFVmaG5rMDVBTDJ0RE5KbmJ0UkVISmtkdkkrMFQwTHc2WWU2T09zWDE5amdOVgpsVjU3WWVZK3F2YXIvQ2NGL1duZ1BNcDJNRjJMTk1CSGR6UVlOYUNEbmxMblNMMm5xMVUrUTh5K2RLZDQ5OWFICnpOTmtvTXlLUkdZLzM1bk1GWkFsSStZenBZa1hmbXNteGowSDBNQk11RkEwUDVDRTRiamJEVDRuWTByWlhxVVoKUFFEK20xZm83RjdjTmpOb2JHdmpuMDM1NFMzbXhPU1JQUXFWZmlJOWx3S0NBUUFaNzNyMEpJd2xEU3UvY3ZEMQp5RXVqVFdGdUtoZ1RhTDRFMWtWMGh5S29neVJ6aFNaRUk3K21MSUxhVjQ2UlZKS2JiWnB3TTJKd0dyTUhaQnJmCkptbHF6S1FPdVFQSjYwUTlrTjlZczVsdkJueGhZb015cUd4UkQwVitlTnpuZDVhU3VUV0hKN2dDWTBCSmprMGgKZzlaOGNnS2dvSkFGbXA1YkdWMHRxeWlzM3NweWM2K0IyWFNhZmZXMVltRzJ5M1Q4TlQ3c3NiaFhaZmtkNzNRdApWNHl4bmwwbWw5dFNhOUxoV0lWeW8wTmJvTUhJbXBYc1NrVVNiVG55RjlRVEFoUUw3dmFWd1E3TkVtM3p1bFkvCnF2amVGTHJsdWU0c3lhVFFka2ZlcXFEQUFhVmUrRzIydlk1aGNURlhtYlN3ZWhBNGZSRFQrTGNTWC9wTmVLNmsKZVd1OUFvSUJBRTVoeWlHNmRIbDEvSjVvK1BPcGp4TVFsK3EyN3RFaFAvR3hzMEhoU0ptT0E4eGEycVNPcVVuKwp6ZWZNclhwWlhSdjY5dW5aVHlvTW91KzdONFRVa05qck5vTnNERWJ1TmJPMU9McGszVVhiMXFRczMxdkI2SUVLCjlsbm8vWjgrWTV1TDc3WXRIZkxhNDE5NWRwaHRFNWt3TG91M0pMdVVlQWtYa0tycE1SeitMSVBMcU4xZFJLblQKeVU2S0FOajVUNEVSdTZtZzZpRmxzNXB2K252Z1NFUHovalNoSU9pbDhMZUtKT1FmWjgxRkZQSGJVcmhKdDV1Zwp0bG5wQkpZeHJXVkJucVZncWxXY29CZmw4azMySFFHRXEvbjdDM0krTW1oRGtwUzlDSjQvcURISWRJVUxJOW1PCkxGbHhacTNtdUg0QnZ2M0ZvN0toWjZmMGxUNXdiS01DZ2dFQkFLMkxyVDhYd0xuRXZmU3BVWG80RVBZS2NVOWkKbDJWQ3pjWXNFNDRoOU1UemM0eUhmMnJJWFR6MzVkZVVFd1RvaXh2VmdmVStDTzJjM3FKZGFMQ1VDVXBxeTZvQgpDZm1GeU5qNXB6ejRuWGMrdDNFVlJ5TXliR0pVb0tscHU5TElzaGdtSENZSnRhQkR1Znl2YUZla3ZTMzhLUVhoCjFVTjVKMzFmMS80REdRR0YxbVoyVSs0QUNWMmZmbHBnNE51SU5HRDhxUkxpU3F2LzhvOEtzS0t2WlZoc2taSjkKVlAySGFMRXRuQm5BWlNZQTc0WktwdlF0NVRsd3RIMktVZXBKRHpMMkhtYmQ1TUpGY2tNT0dNVG9YVHVoQWNmRgpYemRiTy9INDJoZlpCT0FHNmNYakl3VUhXUEJzZVJ1eVhmYzMzSWV5TWdsTThkLzBzMURXVFBSZmZQMD0KLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K\"}"
      }

+ POST /verifyCertCRL

      {
        "httpMethod":"POST",
        "resource":"/verifyCertCRL",
          "body": "{\"cert_x509_pem\":\"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZjekNDQTF1Z0F3SUJBZ0lVQWJSYTFKZGoxRGJuRUt0V1RDaUJFd0h3MTFvd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF3d1haMjh0WVdOamIzVnVkQzVrYjIxaGFXNHViRzlqWVd3d0hoY05NalF3TmpBegpNVGt5TlRNMVdoY05NelF3TmpBeE1Ua3lOVE0xV2pCRk1Rc3dDUVlEVlFRR0V3SkNVakVMTUFrR0ExVUVDQXdDClFsSXhDekFKQmdOVkJBY01BbE5RTVEwd0N3WURWUVFLREFSRVQwTkxNUTB3Q3dZRFZRUUxEQVJCVWtOSU1JSUMKSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQWc4QU1JSUNDZ0tDQWdFQXB0cXhjQ0RZbEp1NU1HM3g3b0ZvOERMaAo1SmFQbFFPeklEZ3grSFM0SUJFcU1GYXBwUjZjNWFpSUpsazVWampVUmVMWjNkNzZudklvc3FxZGpDQklvMG1FCkR4TEY4QVBENGsrMTFUcXYvRXFwd0svNHIvcGVRelVlbXkyaVB0MmVhUnRJYU9BVVRzaEl5cEo2TU5YcDY5V1QKTnV1RVVtWURpRTZiRWlyVnFoVmM1U3dJVFoxOG1GWXlPc0c2TkR3czM1S1pheUR0enJ4dy8yNGc1eXJ3L3FDTApxVEFzeENpd0g0TEIvZFZMWlE4bTV6YnZEdUNwV2RaQkRtelZzelRPWjBaTnAyeVFJb3JyQWFxZ0wvbWhEU1JCCmYwNzQ2NjlEQlgrSmc5M3NIN05ldDE5YkMvRzdPcnc1RExEREpDajltcXJNRDVrRHlMTWRZVnRINFJoWkdVSVoKclpaQmw1LzFLKzQyV3FtUjJhQmd6RVBVU0ZLaHlOTXBuSHFiTU5GSjJiTW5ldGVJYjN0Uk5Nem05eW1acWZCcQpkSVphUG00ZXNCWlg3Q1puWWk4V0plVHlSWkU5bnE4dW5tS0N2TG9FeFFGMlhxVG41bERhT1VhcVVyMHpEY1ZSCnZDZU1wTFAra3NjVElGazVScEFhaStOdW94c2lyNFdTU0xidjFlNk4yWjM4K0paeURuMG1DMnJCZGhkT0ErOGkKYmRFNlFvTGZvTnV6STNiQjFJd1Fzak1BNXRUdG0xSG8zN2ZBa0EzVm1JNjRHaHN1bno0V2tSdzNYV0dIcEZyRwp3QXZZUVlRa2NiUXdsQ1lGelptTjVOZFhpc05NcUZ0MjArTjNxWDIzZ3EzSjNJdys0Mno2YWlZRDJuajUvcWlECkt6OHN4Ylpnd1dySDFqRW80ZGNDQXdFQUFhTitNSHd3RGdZRFZSMFBBUUgvQkFRREFnV2dNQ0FHQTFVZEpRRUIKL3dRV01CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakJJQmdOVkhSRUVRVEEvZ2dsc2IyTmhiR2h2YzNTQwpMR2R2TFdGd2FTMW5iRzlpWVd3dGJYUnNjeTVoY21Ob2FYUmxZM1IxY21VdVkyRnlZV1JvY21GekxtbHZod1IvCkFBQUJNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUNBUUEwUlg1UTcwMDAzdnF0enpSek5JN1hIMGZoVkdVZWo3YkIKTlNvMnFiM1B3N21pcHF3cy9VcmdsYzkycEdGUGRwd0lkLzNKMVVhMW9YVkFJci9QSDJCK2w5clhxL1hHRk1HbAp4RG9FTzJxTm1VUUlBWDBBV0hvWXVka2lWUURtY3lRc1A5QXlZdnQyYWNNc0sxZ2NTaWd2S3VCY0RCVVR6bDRNClRrNFZjeWRMTmZsRTRjQzZTRGVEVXB1aFZrb0JzSGlhYlgva0MwYTJUeFpkOEQ3aXhSZjcxa2RFd1NtU2VUU0kKaWNqYXMyVmt4NlhDVkluOTU4MitDYTI5Mm9OZ2s1Z1hKRDhDamdYcHIvWkFaenorUG92aEx1YVNUUngwb2VEKwpvNUJDUllxNXBnZkZ1eDAySWJsczZRYUljeEFGNEJGUHdUMXpST2RwSWJDWjdTdUlZRmhyenVNNmZyTWJKOG1kCmZVRVl3OUFkcmJxVDdGRHBsaUVNcHJ3Rkk5eE01OTdVNk1rZTBSVXNaUVd5RkVydGJ1c2FwK2FhZUMwYm1sUlkKTzhvLy8zWFdTTWlZcXJHbVp0bzQ0WGQ0WkZhSFJCVnFPRHVlZVVOQlp0L0trUmFQb3ZrTjRDMHNodGVjeXl1SApYb3JGOUVkcFFQQWR2OU5nak81NWxvVkxPbWpTZTZSRXo2V2laSFFDRndYS3NVQ3Rxdm1qdjd2b2l5NytNcG5zCjg1L21BcjZQZ2NRT3VjQ0syUVlwa3NRSHJnbWU2b1ZPVENyUDVaMTF6d05JMTNXSTdlS3JwVzE0TC9hM3VRUTAKek5taHJwbUhKWTc3U0hZaHVtZ2xCZkNXRWNoVzVFZ2h4MXByelMrYTdUYzFzTWxKUm1Cc2hKcTdDeWxVdDZwNwpnaWFpbGJRNFFnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=\"}"
      }

## Compile lambda

    Upload for 1st time
    aws s3 cp ../build/main.zip s3://eliezerraj-908671954593-artifacts/lambda-mtls-key/main.zip

    Manually compile the function

      GOARCH=amd64 GOOS=linux go build -o ../build/bootstrap main.go

      zip -jrm ../build/main.zip ../build/bootstrap

      aws lambda update-function-code \
        --function-name lambda-mtls-key \
        --zip-file fileb:///mnt/c/Eliezer/workspace/github.com/lambda-mtls-key/build/main.zip \
        --publish